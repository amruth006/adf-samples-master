/* Copyright 2010, 2017, Oracle and/or its affiliates. All rights reserved. */
package test.model;

import java.sql.PreparedStatement;
import java.sql.SQLException;

import oracle.jbo.server.QueryCollection;
import oracle.jbo.server.ViewObjectImpl;

import test.model.common.DeptView;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Wed Apr 01 13:56:32 CEST 2009
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class DeptViewImpl extends ViewObjectImpl implements DeptView {
    /**
     * This is the default constructor (do not remove).
     */
    public DeptViewImpl() {
    }
    long lastRequery = 0;
    public long getLastRequery() {
        return lastRequery;
    }
    @Override
    protected void bindParametersForCollection(QueryCollection queryCollection,
                                               Object[] object,
                                               PreparedStatement preparedStatement) throws SQLException {
        super.bindParametersForCollection(queryCollection, object, preparedStatement);
        if (queryCollection != null) {
            lastRequery = System.currentTimeMillis();
        }
        System.out.println("Re-execute "+(queryCollection == null?"count ":"")+"query for VO "+getName());
    }

    @Override
    protected void processDatabaseChangeNotification(QueryCollection queryCollection) {
        lastRequery = System.currentTimeMillis();
        super.processDatabaseChangeNotification(queryCollection);
    }
}
